# Serenity BDD 5.0.4 Release Notes

**JUnit 5 enhancements, Cucumber Scenario Outline fixes, and report improvements**

This release adds support for JUnit 5 `@TestFactory` dynamic tests, fixes conditionally disabled tests missing from reports, resolves console logging indentation issues in parameterized tests, fixes Scenario Outline examples incorrectly shown as skipped, and corrects DataTables errors in result-filtered reports.

## What's changed

### JUnit 5 @TestFactory Support
- Dynamic tests created via `@TestFactory` now generate proper Serenity reports
- Each `@TestFactory` method produces an aggregated report with all dynamic tests shown in a data table (similar to parameterized tests)
- Supports `DynamicTest`, `DynamicContainer`, and nested dynamic test structures
- Display names from dynamic tests are preserved in reports
- Test results (pass/fail) are tracked individually for each dynamic test
- Fixes #3630

### Conditionally Disabled Tests Now Appear in Reports
- Tests disabled via `@EnabledIf`, `@DisabledOnOs`, `@DisabledOnJre`, and other JUnit 5 conditional annotations now correctly appear in Serenity reports as IGNORED
- Previously, only tests with `@Disabled` annotation appeared in reports; conditionally disabled tests were completely omitted
- The fix trusts JUnit's decision when it calls `executionSkipped()`, regardless of which annotation caused the skip
- Fixes #3572

### Console Logging Indentation Fix for Parameterized Tests
- Fixed incorrect step indentation in console output across parameterized test iterations
- The `ConsoleLoggingListener` now properly resets its nested steps state when a new example (parameter row) starts
- Previously, the `nestedSteps` stack persisted between iterations, causing step indentation to drift in subsequent parameter rows
- Fixes #3705

### Scenario Outline Examples No Longer Incorrectly Shown as Skipped
- Fixed an issue where passing Scenario Outline examples were incorrectly shown as "skipped" when a previous example was skipped via `Assumptions.assumeFalse()`
- The `ClearStepFailuresEvent` now clears assumption violation state and unsuspends the test when starting a new example
- This ensures each example in a Scenario Outline starts with a clean state, independent of previous examples
- Fixes #3691

### DataTables Column Index Fix in Result-Filtered Reports
- Fixed a JavaScript error ("Requested unknown parameter '6' for row 0, column 6") in result-filtered report pages
- The `outcomes-with-result.ftl` and `outcomes-with-duration.ftl` templates now use correct column indices for the DataTables configuration
- Previously, these templates incorrectly targeted column index 6 when the table only had 6 columns (indices 0-5)

### Dependency Updates
- ByteBuddy 1.18.2 → 1.18.3
- Apache Commons CSV 1.12.0 → 1.14.1
- Apache Commons Lang 3.19.0 → 3.20.0
- Apache Commons IO 2.20.0 → 2.21.0
- Apache Commons Text 1.14.0 → 1.15.0

## Why this matters

- **Better dynamic test support**: Teams using `@TestFactory` for data-driven or dynamically generated tests can now see all their test results in Serenity reports with proper aggregation and data tables
- **Complete test visibility**: All skipped tests now appear in reports, giving teams accurate visibility into their test suite status, including tests disabled for specific environments or conditions
- **Cleaner console output**: Parameterized tests now display with correct, consistent indentation across all iterations when using `serenity.logging=VERBOSE`
- **Accurate Scenario Outline results**: Teams using conditional example skipping with JUnit 5 Assumptions now see correct pass/skip status for each example row
- **Error-free report navigation**: Result-filtered report pages no longer show JavaScript errors when viewing test results

---

**Full Changelog**: https://github.com/serenity-bdd/serenity-core/compare/5.0.3...5.0.4