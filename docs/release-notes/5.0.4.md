# Serenity BDD 5.0.4 Release Notes

**JUnit 5 enhancements and console logging fixes**

This release adds support for JUnit 5 `@TestFactory` dynamic tests, fixes conditionally disabled tests missing from reports, and resolves console logging indentation issues in parameterized tests.

## What's changed

### JUnit 5 @TestFactory Support
- Dynamic tests created via `@TestFactory` now generate proper Serenity reports
- Each `@TestFactory` method produces an aggregated report with all dynamic tests shown in a data table (similar to parameterized tests)
- Supports `DynamicTest`, `DynamicContainer`, and nested dynamic test structures
- Display names from dynamic tests are preserved in reports
- Test results (pass/fail) are tracked individually for each dynamic test
- Fixes #3630

### Conditionally Disabled Tests Now Appear in Reports
- Tests disabled via `@EnabledIf`, `@DisabledOnOs`, `@DisabledOnJre`, and other JUnit 5 conditional annotations now correctly appear in Serenity reports as IGNORED
- Previously, only tests with `@Disabled` annotation appeared in reports; conditionally disabled tests were completely omitted
- The fix trusts JUnit's decision when it calls `executionSkipped()`, regardless of which annotation caused the skip
- Fixes #3572

### Console Logging Indentation Fix for Parameterized Tests
- Fixed incorrect step indentation in console output across parameterized test iterations
- The `ConsoleLoggingListener` now properly resets its nested steps state when a new example (parameter row) starts
- Previously, the `nestedSteps` stack persisted between iterations, causing step indentation to drift in subsequent parameter rows
- Fixes #3705

## Why this matters

- **Better dynamic test support**: Teams using `@TestFactory` for data-driven or dynamically generated tests can now see all their test results in Serenity reports with proper aggregation and data tables
- **Complete test visibility**: All skipped tests now appear in reports, giving teams accurate visibility into their test suite status, including tests disabled for specific environments or conditions
- **Cleaner console output**: Parameterized tests now display with correct, consistent indentation across all iterations when using `serenity.logging=VERBOSE`

---

**Full Changelog**: https://github.com/serenity-bdd/serenity-core/compare/5.0.3...5.0.4